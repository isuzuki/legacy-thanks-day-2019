## 10年間の環境の振り返り

レガシー感謝の日 2019
2019/11/22

---

## 自己紹介

名前
- いっくん(@ikkuntech)

所属
- Speee株式会社 https://speee.jp/

普段
- 新規事業の開発(メインはバックエンドだが、少人数のためなんでもやらないといけなそう)

+++

言語歴
- TypeScript, Scala, PHPメイン
- その他Terraformなども触ったりしてます

SNS
- Twitter https://twitter.com/ikkuntech
- GitHub https://github.com/isuzuki

---

#### 新規事業の開発にあたって、約10年間の環境を振り返ってみました

---

### 環境1(2008 ~ 2012)

+++

#### 開発環境
- 開発サーバーを使用
- 構成管理は独自のイケてる技術があった
- 社内からのみアクセス化
- 複数人使用しているので、重くなったり、重くしたり
- 空きサーバがない場合は、新規に物理サーバーを購入する必要がある

+++

#### 本番環境
- データセンター内に、物理サーバのクラスタ構築
- 本番環境と同列に構築したクラスタをstg環境としていた

+++

#### 技術スタック
- PHP5系、MySQL4系、Apache、Unix or Linux がメイン
- C++ をハイパフォーマンス要件や、サーバー台数削減のために使用することも
- VCSはCVSからSVNに移行

+++

#### CI/CD
- 独自パッケージ化技術とお手製デプロイスクリプト
- テストコードは無し
- パッケージ化のみ

+++

#### 開発スタイル
- ウォーターフォール
- 開発とビジネス(営業、企画など)は別チーム
 - チーム内で、さらに複数人サブチームを作っていた
 - チームリーダは現在でいうテックリード、ディレクターが多かった
- 1on1などはやっていなかった
- プロダクトリリース後に振り返りを実施したりしなかったり

+++ 

#### 働き方
- 出社必須
- 固定時間就労からフレックス導入(コアタイム長め)

---

### 環境2(2012 ~ 2017)

+++

#### 開発環境
- xampp、virtual boxなどでローカルPC上に構築
- vagrant、ansible、chefで、コードで管理、手順の簡略化

+++

#### 本番環境
- オンプレ(OpenStack)

+++

#### 技術スタック
- PHP5系、MySQL5系、Apache、Nginx、Linux がメイン
- VCSはSVNからオンプレに構築したgitlabに移行
- 最終的にgithubに

+++

#### CI/CD
- 独自リリーススクリプト
- エンジニアがサーバーに入って、git pull
- Jenkins1系 + capistrano を導入して、非エンジニア以外もUIからデプロイ可能に
- タスクランナーの導入やパッケージ管理の導入

+++

#### 開発スタイル
- アジャイル
- 開発、企画は同じチーム
  - 組織によっては、営業も同じチームにいたり
  - チームリーダは現在でいうプロダクトマネージャー
- 朝会、KPTを実施
- 部門長との1on1を実施

+++

#### 働き方
- 裁量労働
  - 定時は決まっていたけど、結構緩い勤怠管理
- リモートワークも可能になっていったが、基本は出社

---

### 環境3(2017 ~ 2019)

+++

#### 開発環境
- IDE上やdockerを使用

+++

#### 本番環境
- public cloud(AWS、GCP)を使用
- k8sやECS Fargateを利用
 - 自動で復旧するように

+++

#### 技術スタック
- Scala、TypeScript、cloud上のリソース(RDS、BigQueryなど)がメイン
- Terraformでクラウドリソースのコード化
- VCSはgithub

+++

#### CI/CD
- CircleCIを利用
  - 1系から2系への移行期で、build用のdockerを利用できるようにしたり
- kubectl applyやecs cliなど、環境に合った機能でのリリース

+++

#### 開発スタイル
- アジャイル
  - スクラム、週1でスプリントの振り返り実施
  - ペアプロ、モブプロなどを実施
- KPT、FDLを実施
- 開発、企画は同じチームだが、ほぼエンジニア
  - チームリーダは現在でいうエンジニアマネージャー
  - チームリーダとの1on1実施

+++

#### 働き方
- 裁量労働
  - 定時は決まっていたけど、結構緩い勤怠管理
  - 状況によって柔軟に定時を変更することができた
  - 子供が産まれて3ヶ月間程は、出社と退社時間を早めていた
- リモートワークも可能だが、基本は出社

---

### 現在(2019 ~ )

+++

### 検討中
- 開発環境、CI/CD、開発スタイルなどは、今までの経験とチームメンバーに応じて決める予定です

+++

### 働き方
- フレックス
  - コアタイムは11 ~ 14時
- リモートワークはまだ非推奨
  - 天候や家庭事情に状況に応じて可能

---

#### こうして今までの環境を振り返ってみると
- システムとしてレガシーさを感じるが、プロダクトは成長し、ユーザーに価値を届けれていることも
- モダンなシステム構成にしたが、ユーザーに価値を届けるまでに時間がかかり過ぎてしまったことも
- 働き方、開発スタイルがモダンと言われているものが、取り入れられてなくても、生産性高く働けたりすることも

---

### レガシーとは自分たちこそが作っている
### レガシーをレガシーとして扱ったときに、レガシーは生まれる

引用 : @dskst9 さんのスライドより  
https://speakerdeck.com/dskst/what-is-legacy

---

#### 今までのレガシーに感謝しつつ、これからのレガシーを楽しみ、仲良くやっていきます！

---

### 宣伝

- 12/11(水) Apache Arrow東京ミートアップ2019を行います
- イベントページ : https://speee.connpass.com/event/152887/

---

ご清聴ありがとうございました！
検討中
